import type { ChangeHistoryItem, ConflictEvent } from '../types/history';
import { addDays, subDays, subHours, subMinutes } from 'date-fns';

const now = new Date();

export const sampleHistory: ChangeHistoryItem[] = [
  {
    id: 'hist1',
    timestamp: subMinutes(now, 5),
    userId: '田中太郎',
    action: 'update',
    entityType: 'task',
    entityId: 'task1',
    entityName: 'UI設計の完成',
    changes: [
      {
        field: 'priority',
        oldValue: 70,
        newValue: 85,
        displayName: '優先度',
      },
      {
        field: 'status',
        oldValue: '未着手',
        newValue: '進行中',
        displayName: 'ステータス',
      },
    ],
    ipAddress: '192.168.1.100',
    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
  },
  {
    id: 'hist2',
    timestamp: subMinutes(now, 15),
    userId: '佐藤花子',
    action: 'create',
    entityType: 'checklist',
    entityId: 'check1',
    entityName: 'API設計チェックリスト',
    changes: [
      {
        field: 'items',
        oldValue: null,
        newValue: ['エンドポイント設計', 'レスポンス形式確認', 'エラーハンドリング'],
        displayName: 'チェック項目',
      },
    ],
    ipAddress: '192.168.1.101',
    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
  },
  {
    id: 'hist3',
    timestamp: subHours(now, 1),
    userId: '鈴木次郎',
    action: 'update',
    entityType: 'task',
    entityId: 'task2',
    entityName: 'データベース設計',
    changes: [
      {
        field: 'endDate',
        oldValue: addDays(now, 5),
        newValue: addDays(now, 7),
        displayName: '終了日',
      },
      {
        field: 'assignedTo',
        oldValue: ['鈴木次郎'],
        newValue: ['鈴木次郎', '田中太郎'],
        displayName: '担当者',
      },
    ],
    ipAddress: '192.168.1.102',
    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
  },
  {
    id: 'hist4',
    timestamp: subHours(now, 2),
    userId: '山田三郎',
    action: 'create',
    entityType: 'taskfog',
    entityId: 'fog1',
    entityName: '個人スケジュール（会議）',
    changes: [
      {
        field: 'period',
        oldValue: null,
        newValue: `${addDays(now, 2).toLocaleDateString()} - ${addDays(now, 4).toLocaleDateString()}`,
        displayName: '期間',
      },
      {
        field: 'color',
        oldValue: null,
        newValue: '#FF6B6B',
        displayName: '色',
      },
    ],
    ipAddress: '192.168.1.103',
    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
  },
  {
    id: 'hist5',
    timestamp: subHours(now, 3),
    userId: '佐藤花子',
    action: 'delete',
    entityType: 'task',
    entityId: 'task_deleted',
    entityName: '不要になったタスク',
    changes: [
      {
        field: 'status',
        oldValue: '保留',
        newValue: null,
        displayName: 'ステータス',
      },
    ],
    ipAddress: '192.168.1.101',
    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
  },
  {
    id: 'hist6',
    timestamp: subDays(now, 1),
    userId: '田中太郎',
    action: 'update',
    entityType: 'settings',
    entityId: 'project_settings',
    entityName: 'プロジェクト設定',
    changes: [
      {
        field: 'colorTheme',
        oldValue: 'light',
        newValue: 'dark',
        displayName: 'カラーテーマ',
      },
      {
        field: 'autoColorCorrection',
        oldValue: false,
        newValue: true,
        displayName: '自動カラー補正',
      },
    ],
    ipAddress: '192.168.1.100',
    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
  },
  {
    id: 'hist7',
    timestamp: subDays(now, 2),
    userId: '鈴木次郎',
    action: 'assign',
    entityType: 'task',
    entityId: 'task3',
    entityName: 'テストケース作成',
    changes: [
      {
        field: 'assignedTo',
        oldValue: ['鈴木次郎'],
        newValue: ['鈴木次郎', '山田三郎'],
        displayName: '担当者',
      },
    ],
    ipAddress: '192.168.1.102',
    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
  },
  {
    id: 'hist8',
    timestamp: subDays(now, 3),
    userId: '山田三郎',
    action: 'move',
    entityType: 'task',
    entityId: 'task4',
    entityName: 'コードレビュー',
    changes: [
      {
        field: 'parentGroup',
        oldValue: 'グループA',
        newValue: 'グループB',
        displayName: '所属グループ',
      },
      {
        field: 'order',
        oldValue: 3,
        newValue: 1,
        displayName: '表示順序',
      },
    ],
    ipAddress: '192.168.1.103',
    userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
  },
];

export const sampleConflicts: ConflictEvent[] = [
  {
    id: 'conflict1',
    timestamp: subMinutes(now, 30),
    entityType: 'task',
    entityId: 'task1',
    entityName: 'UI設計の完成',
    users: ['田中太郎', '佐藤花子'],
    resolved: true,
    resolutionMethod: 'auto',
    resolvedBy: 'システム',
    resolvedAt: subMinutes(now, 25),
  },
  {
    id: 'conflict2',
    timestamp: subHours(now, 2),
    entityType: 'task',
    entityId: 'task2',
    entityName: 'データベース設計',
    users: ['鈴木次郎', '山田三郎'],
    resolved: true,
    resolutionMethod: 'manual',
    resolvedBy: '鈴木次郎',
    resolvedAt: subHours(now, 1.5),
  },
  {
    id: 'conflict3',
    timestamp: subMinutes(now, 10),
    entityType: 'checklist',
    entityId: 'check2',
    entityName: 'テストチェックリスト',
    users: ['田中太郎', '鈴木次郎'],
    resolved: false,
  },
];